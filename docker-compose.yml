
services:
  app_rrhh:
    image: api-jj:julen_version
    container_name: app_rrhh
    ports:
      - 3000:3000
    build: .
    command: npm run dev
    environment:
      DB_HOST: db
      DB_PORT: 5432
      DB_USER: admin
      DB_PASSWORD: password
      DB_NAME: rrhh-db
      PORT : 3000
      NODE_ENV : development
    develop:
      watch:
        - action: sync
          path: ./
          target: /app
          ignore:
            - node_modules/

        - action: sync
          path: ./index.js
          target: /app/index.js
        
        - action: sync
          path: ./queries.js
          target: /app/queries.js
        
        - action: rebuild
          path: ./package.json 
    depends_on:
      - db
  db:
    image: postgres
    container_name: rrhh_postgres
    ports: 
    - 5432:5432
    environment:
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: password
      POSTGRES_DB: rrhh-db
    volumes:
      - pg-data:/var/lib/postgresql

volumes:
  pg-data:
    driver: local
    